function convertToHref(e){var t;return t=e.includes("zenodo")?e.split("https://doi.org/").pop():e,'<a class="underline" href="'+e+'">'+t+"</a>"}function hardcodeFromJson(e,t,a,o,n,s,i,r){$.getJSON(e+t+"?v="+Date.now(),function(t){for(var n=new Set,l=new Set,d=0;d<t.length;d++)n.add(t[d].subtype),t[d].hasOwnProperty("product")&&l.add(t[d].subtype+"--\x3e"+t[d].product);n=Array.from(n),l=Array.from(l),null==n[0]&&(n=[]),null==l[0]&&(l=[]);var c=JSON.parse(JSON.stringify(n));addTreeDirectories(n,a),addTreeNodes(r,t,o,a),buildBootstrapTree(r,e,a,s,i,o,c),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})})}function addTreeDirectories(e,t){for(var a=0;a<e.length;a++)if("string"==typeof e[a])t.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+e[a]+"</span>",nodes:[],name:e[a]});else{for(var o=Object.keys(e[a])[0],n=[],s=0;s<e[a][o].length;s++)n.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+e[a][o][s],nodes:[],name:e[a][o][s]});t.push({text:"<span class=\"root-break\" onmouseover='toggleTitle(this)'>"+o+"</span>",nodes:n,name:o})}}function addTreeNodes(e,t,a,o){for(var n in t)if(a[n]=t[n],"subtype"in a[n])addNodesToDirectory(e,n,o,a);else if("settings"!=n&&"EpiCaseMap"!=n){var s=getNodeData(e,n,a);s.nodes=[],o.push(s)}for(var i=0;i<o.length;i++){for(var r=0,l=0;l<o[i].nodes.length;l++)null!=o[i].nodes[l].nodes&&o[i].nodes[l].nodes.length>0&&(r+=o[i].nodes[l].nodes.length-1,o[i].nodes[l].text+=" ["+o[i].nodes[l].nodes.length+"]");o[i].nodes.length>0&&(r+=o[i].nodes.length,o[i].text+=" ["+r+"]")}}function buildBootstrapTree(e,t,a,o,n,s,i){for(u=0;u<a.length;u++)"nodes"in a[u]&&a[u].nodes.sort(compareNodes);a.sort(compareNodes);var r={data:a,showBorder:!1,collapseAll:!0,expandIcon:"glyphicon glyphicon-chevron-right",collapseIcon:"glyphicon glyphicon-chevron-down",onNodeSelected:function(e,t){void 0!=typeof t.nodes&&$(o).treeview("toggleNodeExpanded",[t.nodeId,{levels:1,silent:!0}]).treeview("unselectNode",[t.nodeId,{silent:!0}]);var a=$.parseJSON(sessionStorage.getItem(n));if(t.state.expanded)null!=a&&(s=a.indexOf(t.nodeId))>-1&&a.splice(s,1);else if(null!=a){var s=a.indexOf(t.nodeId);s<=-1&&a.push(t.nodeId)}else(a=[]).push(t.nodeId);sessionStorage.setItem(n,JSON.stringify(a)),null!=t.url&&1==t.state.selected&&(ga("send",{hitType:"event",eventCategory:"Clickthrough",eventAction:t.url}),window.location.href=t.url)}};"diseaseTransmissionModels"==e||"systemSoftware"==e||"tools"==e||"standardIdentifiers"==e?(r.expandIcon="bullet-point",r.collapseIcon="bullet-point",r.highlightSelected=!1,r.onNodeSelected=function(e,t){$('[data-toggle="tooltip"]').tooltip("destroy"),e.stopPropagation()},$(o).treeview(r),$(o).treeview("expandAll",{silent:!0})):("standardIdentifiers"==e&&(r.expandIcon="",r.collapseIcon=""),$(o).treeview(r),$(o).treeview("collapseAll",{silent:!0}));var l=$.parseJSON(sessionStorage.getItem(n)),d=[];if(null==l){for(var c=[],u=0;u<i.length;u++){var p=$(o).treeview("search",[i[u],{ignoreCase:!1,exactMatch:!1,revealResults:!1}])[0];$(o).treeview("clearSearch"),null!=p&&c.push(p.nodeId)}l=c,sessionStorage.setItem(n,JSON.stringify(c))}if(null!=l){for(u=0;u<l.length;u++)try{$(o).treeview("expandNode",[l[u],{silent:!0}])}catch(e){d.push(u)}if(d.length>0){for(u=0;u<d.length;u++)l.splice(d[u],1);sessionStorage.setItem(n,JSON.stringify(l))}}}function addNodesToDirectory(e,t,a,o){for(var n=0;n<a.length;n++){var s=[],i=[];addNodesToSubdirectories(a[n],s,i);var r=s.indexOf(o[t].product);if(a[n].name==o[t].subtype||r>-1){var l=getNodeData(e,t,o);r>-1?(i[r].nodes.push(l),i[r].nodes.sort(compareNodes)):a[n].nodes.push(l);break}}}function addNodesToSubdirectories(e,t,a){if("nodes"in e)for(var o in e.nodes)"nodes"in e.nodes[o]&&(t.push(e.nodes[o].name),a.push(e.nodes[o]))}function getNodeData(e,t,a){var o=t,n={text:'<span onmouseover="toggleTitle(this)" onclick="openModal(\''+e+"','"+t+"')\">"+(o="version"in a[t]?getSoftwareTitle(a[t].title,a[t].version.join(", ")):a[t].title)+"</span>",name:o};if("availableOnOlympus"in a[t]&&1==a[t].availableOnOlympus&&(n.text+=' <b><i class="olympus-color"><sup>AOC</sup></i></b>'),"availableOnUIDS"in a[t]&&1==a[t].availableOnUIDS&&(n.text+=' <b><i class="udsi-color"><sup>UIDS</sup></i></b>'),"signInRequired"in a[t]&&1==a[t].signInRequired&&(n.text+=' <b><i class="sso-color"><sup>SSO</sup></i></b>'),"redirect"in a[t]&&1==a[t].redirect){var s="";"source"in a[t]&&(s=a[t].source),"website"in a[t]&&(s=a[t].website),s.length>0&&(n.url=s,n.text='<span onmouseover="toggleTitle(this)">'+o+"</span>","availableOnOlympus"in a[t]&&1==a[t].availableOnOlympus&&(n.text+=' <b><i class="olympus-color"><sup>AOC</sup></i></b>'),"availableOnUIDS"in a[t]&&1==a[t].availableOnOlympus&&(n.text+=' <b><i class="udsi-color"><sup>UIDS</sup></i></b>'),"signInRequired"in a[t]&&1==a[t].signInRequired&&(n.text+=' <b><i class="sso-color"><sup>SSO</sup></i></b>',n.signInRequired=a[t].signInRequired))}return"software"!=e&&"webServices"!=e&&"dataFormats"!=e&&"standardIdentifiers"!=e&&(n.text="<span data-placement='auto right' data-container='body' data-toggle='tooltip' title='"+a[t].description+"'>"+o+"</span>"),n}function getSoftwareTitle(e,t){var a=e,o=a.split(" "),n=o[o.length-1];return 3==n.length&&n.startsWith("[")&&n.endsWith("]")&&(a=o.slice(0,o.length-1).join(" ")),""!=(t=t.split(" - ")[0])&&(isNaN(t[0])||"2010 U.S. Synthesized Population"==t?a+=" - "+t:a+=" - v"+t),a}function getDataAndKnowledgeTree(e,t,a,o,n){var s=[];a+="main/";var i=[{text:'<span onmouseover=\'toggleTitle(this)\' onclick=\'openModal("syntheticPopulations","county")\'>2010 U.S. Synthetic Populations by County</span> <b><i class="olympus-color"><sup>AOC</sup></i></b>'},{text:'<span onmouseover=\'toggleTitle(this)\' onclick=\'openModal("syntheticPopulations","state")\'>2010 U.S. Synthetic Populations by State</span> <b><i class="olympus-color"><sup>AOC</sup></i></b>'}],r={text:"Synthia™ datasets <span class='badge'>["+Object.keys(i).length+"]</span>",nodes:i},l={text:"Synthetic populations and ecosystems <span class='badge'>["+(n+Object.keys(i).length)+"]</span>",nodes:[t,r]};s.push(l),locationData.text+=" <span class='badge'>["+locationData.nodes.length+"]</span>",s.push(locationData);for(var d=0;d<dsdNodeNames.length;d++)dsd.nodes.push({text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"diseaseSurveillance\",\""+dsdNodeNames[d]+"\")'>"+dsdNodeNames[d]+"</span>",name:dsdNodeNames[d]});dsd.nodes.push({text:"<span onmouseover='toggleTitle(this)'>Project Tycho datasets</span>",name:"Project Tycho datasets",nodes:[]});var c=[],u=dsd.nodes[dsd.nodes.length-1].nodes;$.getJSON(ctx+"/resources/hardcoded-tycho.json?v="+Date.now(),function(e){for(var t="",a=null,o=null,n=[],s=0;s<e.length;s++)n.includes(e[s].continent)?o=u[n.indexOf(e[s].continent)].nodes:(u.push({name:e[s].continent,text:"<span onmouseover='toggleTitle(this)'>"+e[s].continent+"</span>",nodes:[]}),n.push(e[s].continent),o=u[u.length-1].nodes),e[s].countryIso!=t&&(t=e[s].countryIso,o.push({name:e[s].subtype,text:"<span onmouseover='toggleTitle(this)'>"+e[s].subtype+"</span>",nodes:[]}),null!=a&&a.sort(compareNodes),a=o[o.length-1].nodes),a.push({name:e[s].product,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"tycho\",\""+e[s].id+"\")'>"+e[s].product+" ("+e[s].dateRange+")</span>"}),c.push(e[s].id);for(s=0;s<u.length;s++){for(var i=0,r=0;r<u[s].nodes.length;r++)u[s].nodes[r].text+=" <span class='badge'>["+u[s].nodes[r].nodes.length+"]</span>",i+=u[s].nodes[r].nodes.length;u[s].text+=" <span class='badge'>["+i+"]</span>",u[s].nodes.sort(compareNodes)}dsd.nodes[dsd.nodes.length-1].text+=" <span class='badge'>["+c.length+"]</span>";for(var l=c.length,s=0;s<dsd.nodes.length;s++)null!=dsd.nodes[s].nodes&&0!=dsd.nodes[s].nodes.length||(l+=1);dsd.text+=" <span class='badge'>["+l+"]</span>",u[u.length-1].nodes.sort(compareNodes)}).then(function(){dsd.nodes.sort(compareNodes),u.sort(compareNodes),populateTycho(c,0),s.push(dsd),weatherAndClimateData.text+=" <span class='badge'>["+weatherAndClimateData.nodes.length+"]</span>",s.push(weatherAndClimateData);for(var t={text:"Mortality data <span class='badge'>["+moralityDataNodeNames.length+"]</span>",nodes:[]},o=0;o<moralityDataNodeNames.length;o++)t.nodes.push({text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"mortalityData\",\""+moralityDataNodeNames[o]+"\")'>"+moralityDataNodeNames[o]+"</span>",name:moralityDataNodeNames[o]});s.push(t);var n={};null!=e&&$.each(e,function(e,t){var o;o=e.includes("Epidemic")?a+"epidemic/":e.includes("Case series")?a+"caseSeries/":a+"infectiousDiseaseScenario/";var s=[],i=0;$.each(t,function(e,t){var a=[],n=!1,r=!1,l=!1,d=!1,c=!1;"Ebola epidemics"==e?n=!0:"Rabies case listings"==e?r=!0:"Chikungunya epidemics"==e?l=!0:"Zika epidemics"==e?d=!0:"H1N1 infectious disease scenarios"==e&&(c=!0),$.each(t,function(e,t){if(i++,n||r||l||d||c){var s=t.name.trim();s.includes("É")?s=s.replace("É","E"):s.includes("/")?s=s.replace("/",":"):s.includes("é")&&(s=s.replace("é","e")),n?(a.push({name:t.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"epidemics\",\""+s+"\")'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/ebola-dats-json/"+s+".json?v="+Date.now(),function(e){addDatsToDictionary(epidemicsDictionary,e,s)}).error(function(e){console.log("error")})):r?(a.push({name:t.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"caseSeries\",\""+s+"\")'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/case-series-dats-json/"+s+".json?v="+Date.now(),function(e){addDatsToDictionary(caseSeriesDictionary,e,s)}).error(function(e){console.log(s)})):l?(a.push({name:t.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"chikungunya\",\""+s+"\")'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/chikungunya-dats-json/"+s+".json?v="+Date.now(),function(e){addDatsToDictionary(chikungunyaDictionary,e,s)}).error(function(e){console.log(s)})):d?(a.push({name:t.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"zika\",\""+s+"\")'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/zika-dats-json/"+s+".json?v="+Date.now(),function(e){addDatsToDictionary(zikaDictionary,e,s)}).error(function(e){console.log(s)})):c&&(a.push({name:t.name,text:"<span onmouseover='toggleTitle(this)' onclick='openModal(\"infectiousDisease\",\""+s+"\")'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b></span>'}),$.getJSON(ctx+"/resources/infectious-disease-dats-json/"+s+".json?v="+Date.now(),function(e){addDatsToDictionary(infectiousDiseaseDictionary,e,s)}).error(function(e){console.log(s)}))}else a.push({text:"<span onmouseover='toggleTitle(this)'>"+t.name+' <b><i class="ae-color"><sup>AE</sup></i><b> </span> ',url:o+t.urn})}),(e.includes("Zika")||e.includes("Chikungunya"))&&(e+=" (under development)"),e.includes("H1n1 infectious disease scenarios")&&(e="H1N1 infectious disease scenarios"),s.push({text:"<span onmouseover='toggleTitle(this)'>"+e+" <b><i class=\"ae-color\"><sup>AE</sup></i><b> </span> <span class='badge'>["+t.length+"]</span>",nodes:a})});var r=e+" datasets";"Epidemics"==e?r="Epidemic datasets":"Infectious disease scenarios"==e&&(r="Infectious disease scenario datasets"),n[e]={text:"<span onmouseover='toggleTitle(this)'>"+r+"</span> <span class='badge'>["+i+"]</span>",nodes:s}}),s.push(n.Epidemics),s.push(n["Case series"]),s.push(n["Infectious disease scenarios"]),$("#data-and-knowledge-treeview").treeview({data:s,showBorder:!1,expandIcon:"glyphicon glyphicon-chevron-right",collapseIcon:"glyphicon glyphicon-chevron-down"}),$("#data-and-knowledge-treeview").treeview("collapseAll",{silent:!0}),$("#data-and-knowledge-treeview").on("nodeSelected",function(e,t){void 0!=typeof t.nodes&&$("#data-and-knowledge-treeview").treeview("toggleNodeExpanded",[t.nodeId,{levels:1,silent:!0}]).treeview("unselectNode",[t.nodeId,{silent:!0}]);var a=$.parseJSON(sessionStorage.getItem("expandedDataAndKnowledge"));if(t.state.expanded)null!=a&&(o=a.indexOf(t.nodeId))>-1&&a.splice(o,1);else if(null!=a){var o=a.indexOf(t.nodeId);o<=-1&&a.push(t.nodeId)}else(a=[]).push(t.nodeId);sessionStorage.setItem("expandedDataAndKnowledge",JSON.stringify(a)),null!=t.url&&1==t.state.selected&&(ga("send",{hitType:"event",eventCategory:"Clickthrough",eventAction:t.url}),t.url.search("apolloLibraryViewer")>-1?$(location).attr("href","${pageContext.request.contextPath}/midas-sso/view?url="+encodeURIComponent(t.url)):$(location).attr("href",t.url))});var i=$.parseJSON(sessionStorage.getItem("expandedDataAndKnowledge")),r=[];if(null==i){for(var l=["Synthetic populations and ecosystems","Location data","Disease surveillance data","US notifiable diseases","Mortality data","Case series","Rabies case listings","Epidemic","Infectious disease scenario","H1N1 infectious disease scenarios","Standards for encoding data","Data formats","Standard identifiers","Weather and climate data"],d=[],o=0;o<l.length;o++){var p=$("#data-and-knowledge-treeview").treeview("search",[l[o],{ignoreCase:!1,exactMatch:!1,revealResults:!1}])[0];$("#data-and-knowledge-treeview").treeview("clearSearch"),null!=p&&d.push(p.nodeId)}i=d,sessionStorage.setItem("expandedDataAndKnowledge",JSON.stringify(d))}if(null!=i){for(o=0;o<i.length;o++)try{$("#data-and-knowledge-treeview").treeview("expandNode",[i[o],{silent:!0}])}catch(e){r.push(o)}if(r.length>0){for(o=0;o<r.length;o++)i.splice(r[o],1);sessionStorage.setItem("expandedDataAndKnowledge",JSON.stringify(i))}}})}function openViewer(e){window.open(e)}function identifierToString(e){if(e.hasOwnProperty("identifier")){var t=e.identifier;identifierCodes.hasOwnProperty(t.identifier)?e=identifierCodes[t.identifier]:t.hasOwnProperty("identifierDescription")&&(e=t.identifierDescription)}return e}function nameToString(e){var t={};return e.hasOwnProperty("name")&&(t=e.name),e.hasOwnProperty("location")&&(t+=", "+e.location),0===Object.keys(t).length?e:t}function listToHtmlString(e){var t='<ul style="padding-left:19px"><li>';return e=e.join("</li><li>"),t+=e+"</ul>"}function displayList(e){var t=e.join(", ");return t.includes("http")||(t=t.charAt(0).toUpperCase()+t.slice(1)),t}function parseAttributeList(e,t){for(var a=0;a<e.length;a++)e[a]=identifierToString(e[a]),null!==e[a]&&e[a].length>0&&!1}function toggleModalItem(e,t,a,o,n){var s="#software-"+a,i=s+"-container";if(e in t&&null!=t[e]||"accessURL"===e||"landingPage"===e){var r;if(e in t)r=t[e];else{if(null==t.distributions)return void $(i).hide();try{r=t.distributions[0].access[e]}catch(e){return void $(i).hide()}if(null==r)return void $(i).hide()}var l=!0;if("[object Array]"===Object.prototype.toString.call(r)){for(var d=0;d<r.length;d++)r[d]=identifierToString(r[d]),null!==r[d]&&r[d].length>0&&(l=!1),r[d]=nameToString(r[d]),null!==r[d]&&r[d].length>0&&(l=!1);l&&$(i).hide(),r=convertToHtml.indexOf(e)>-1&&r.length>1?listToHtmlString(r):displayList(r)}else"producedBy"===e?0!==Object.keys(r).length?(r=0!==Object.keys(r.location).length?r.name+", "+r.location.postalAddress:r.name,l=!1):$(i).hide():"type"===e?0!==Object.keys(r).length?("[object Object]"===Object.prototype.toString.call(r)&&(r=r.value),r.length>0&&(l=!1)):$(i).hide():l=!1;l?$(i).hide():(n?$(s).html(r):$(s).text(r),o&&$(s).attr("href",r),$(i).show())}else $(i).hide()}function toggleRequiredModalItem(e,t,a,o,n,s){var i="#software-"+a,r=i+"-container";if(e in t){var l=t[e],d=!0;if("[object Array]"===Object.prototype.toString.call(l)){for(var c=0;c<l.length;c++)l[c]=identifierToString(l[c]),null!==l[c]&&l[c].length>0&&(d=!1);d&&$(r).hide(),l=convertToHtml.indexOf(e)>-1&&l.length>1?listToHtmlString(l):displayList(l)}else d="identifier"===e&&null==(l=l.identifier);d?s.includes("Dataset")||s.includes("DataStandard")?$(r).hide():($(r).show(),$(i).html("N/A")):(l.startsWith("http")&&!l.includes(" ")&&(l="<a class='underline' href='"+l+"'>"+l+"</a>"),n?$(i).html(l):$(i).text(l),o&&$(i).attr("href",l),$(r).show())}else s.includes("Dataset")||s.includes("DataStandard")?$(r).hide():($(r).show(),$(i).html("N/A"))}function openModal(e,t,a){var o={},n=-1;if(null!=a?(t=(o=JSON.parse(a)).title,e=e.toLowerCase(),$("#display-json").text(JSON.stringify(o,null,"\t"))):"software"==e?(o=softwareDictionary[t],n=parseInt(t),t=o.title,ga("send",{hitType:"event",eventCategory:"User Activity",eventAction:"Software - "+t})):"webServices"==e?(t=(o=webservicesDictionary[t]).title,ga("send",{hitType:"event",eventCategory:"User Activity",eventAction:"Web Services - "+t})):"syntheticEcosystems"==e||"epidemics"==e||"syntheticPopulations"==e||"caseSeries"==e||"chikungunya"==e||"diseaseSurveillance"==e||"mortalityData"==e||"zika"==e||"infectiousDisease"==e||"tycho"==e?("syntheticEcosystems"==e?(o=syntheticEcosystemsDictionary[t],stateHash.hasOwnProperty(t)?t=stateHash[t]:countryHash.hasOwnProperty(t)&&(t=countryHash[t])):"epidemics"==e?t=(o=epidemicsDictionary[t]).title.replace(" data and knowledge",""):"syntheticPopulations"==e?t=(o=synthiaPopulationsDictionary[t]).title:"caseSeries"==e?t=(o=caseSeriesDictionary[t]).title:"chikungunya"==e?t=(o=chikungunyaDictionary[t]).title:"diseaseSurveillance"==e?t=(o=diseaseSurveillanceDictionary[t]).title:"mortalityData"==e?t=(o=moralityDataDictionary[t]).title:"zika"==e?t=(o=zikaDictionary[t]).title:"infectiousDisease"==e?t=(o=infectiousDiseaseDictionary[t]).title:"tycho"==e&&(t=(o=tychoDictionary[t]).title),$("#mdc-json").hide(),$("#dats-json").show(),$("#modal-switch-btn").show(),$("#display-json").text(JSON.stringify(o.json,null,"\t"))):"dataFormats"==e?(t=(o=dataFormatsDictionary[t]).title,$("#mdc-json").hide(),$("#dats-json").show(),$("#modal-switch-btn").show(),$("#display-json").text(JSON.stringify(o.json,null,"\t"))):"standardIdentifiers"==e&&(o=standardIdentifiersDictionary[t]),"software"!=e&&"webServices"!=e&&"standardIdentifiers"!=e||($("#dats-json").hide(),$("#mdc-json").show(),$("#modal-switch-btn").show(),"software"==e?$.get(ctx+"/getSoftwareXml?index="+n,function(e){$("#display-json").text((new XMLSerializer).serializeToString(e.documentElement))}):$("#display-json").text(JSON.stringify(o,null,4))),null!=t?($("#software-name").show(),"version"in o?$("#software-name").text(getSoftwareTitle(t,o.version.join(", "))):$("#software-name").text(t)):$("#software-name").hide(),"developers"in o){i=(s=o.developers).length;s=s.join(", "),$("#software-developer-container").show(),$("#software-developer").html(s),i>1?$("#software-developer-tag").text("Developers:"):$("#software-developer-tag").text("Developer:")}else $("#software-developer-container").hide();if("creator"in o?(i=(s=o.creator).length,s=s.join(", "),$("#software-creator-container").show(),$("#software-creator").html(s),i>1?$("#software-creator-tag").text("Creators:"):$("#software-creator-tag").text("Creator:")):$("#software-creator-container").hide(),"version"in o){var s=o.version,i=s.length;s=s.join(", "),$("#software-version-container").show(),$("#software-version").text(s),i>1&&"software"==e?$("#software-version-tag").text("Software versions:"):$("#software-version-tag").text("Software version:"),i>1&&"webServices"==e?$("#software-version-tag").text("Versions:"):$("#software-version-tag").text("Version:")}else"syntheticEcosystems"!=e&&"epidemics"!=e&&"syntheticPopulations"!=e&&"dataFormats"!=e&&"chikungunya"!=e&&"caseSeries"!=e&&"diseaseSurveillance"!=e&&"mortalityData"!=e&&"zika"!=e&&"infectiousDisease"!=e&&"tycho"!=e?$("#software-version").text("N/A"):$("#software-version-container").hide();if("dataServiceDescription"in o)for(var r=o.dataServiceDescription,l=0;l<r.length;l++)Object.keys(r[l]).includes("accessPointType")&&"custom"!=r[l].accessPointType&&("REST"==r[l].accessPointType?o.restDocumentation=r[l].accessPointDescription:"SOAP"==r[l].accessPointType&&(o.soapDocumentation=r[l].accessPointDescription)),null!=r[l].accessPointUrl&&""!=r[l].accessPointUrl&&(o.endpointPrefix=r[l].accessPointUrl);toggleRequiredModalItem("identifier",o,"identifier",!1,!0,e),toggleRequiredModalItem("dataInputFormats",o,"data-input-formats",!1,!0,e,!0),toggleRequiredModalItem("dataOutputFormats",o,"data-output-formats",!1,!0,e,!0),toggleModalItem("type",o,"type",!1,!1),toggleModalItem("populationSpeciesIncluded",o,"population-species",!1,!1),toggleModalItem("source",o,"source-code",!0,!1),toggleModalItem("pathogenCoverage",o,"pathogen-coverage",!1,!1),toggleModalItem("locationCoverage",o,"location-coverage",!1,!1),toggleModalItem("speciesIncluded",o,"species-included",!1,!1),toggleModalItem("hostSpeciesIncluded",o,"host-species-included",!1,!1),toggleModalItem("controlMeasures",o,"control-measures",!1,!1),toggleModalItem("title",o,"title",!1,!1),toggleModalItem("humanReadableSynopsis",o,"human-readable-synopsis",!1,!0),toggleModalItem("sourceCodeRelease",o,"source-code-release",!1,!0),toggleModalItem("publicationsAboutRelease",o,"publications-about-release",!1,!0),toggleModalItem("publicationsThatUsedRelease",o,"publications-that-used-release",!1,!0),toggleModalItem("webApplication",o,"web-application",!0,!1),toggleModalItem("userGuidesAndManuals",o,"user-guides-and-manuals",!0,!1),toggleModalItem("executables",o,"executables",!1,!0),toggleModalItem("license",o,"license",!1,!0),toggleModalItem("endpointPrefix",o,"end-point-prefix",!0,!1),toggleModalItem("documentation",o,"documentation",!1,!0),toggleModalItem("restDocumentation",o,"rest-documentation",!0,!1),toggleModalItem("soapDocumentation",o,"soap-documentation",!0,!1),toggleModalItem("soapEndpoint",o,"soap-endpoint",!0,!1),toggleModalItem("projectSource",o,"project-source-code",!0,!1),toggleModalItem("soapSource",o,"rest-source-code",!0,!1),toggleModalItem("restSource",o,"soap-source-code",!0,!1),toggleModalItem("exampleQueries",o,"example-queries",!1,!0),toggleModalItem("diseases",o,"diseases",!1,!1),toggleModalItem("region",o,"region",!1,!0),toggleModalItem("locations",o,"locations",!1,!0),toggleModalItem("pathogens",o,"pathogens",!1,!0),toggleModalItem("outcomes",o,"outcomes",!1,!0),toggleModalItem("forecasts",o,"forecasts",!1,!0),toggleModalItem("nowcasts",o,"nowcasts",!1,!0),toggleModalItem("website",o,"website",!0,!1),toggleModalItem("forecastFrequency",o,"forecast-frequency",!1,!1),toggleModalItem("visualizationType",o,"visualization-type",!1,!1),toggleModalItem("grants",o,"grant",!1,!1),toggleModalItem("platform",o,"platform",!1,!1),toggleModalItem("description",o,"description",!1,!1),toggleModalItem("landingPage",o,"landing-page",!0,!1),toggleModalItem("accessUrl",o,"access-url",!0,!1),toggleModalItem("authorizations",o,"authorizations",!1,!1),toggleModalItem("humanReadableSpecification",o,"human-readable-specification",!0,!1),toggleModalItem("machineReadableSpecification",o,"machine-readable-specification",!0,!1),toggleModalItem("validator",o,"validator",!0,!1),$("#pageModal").modal("show")}function formatLocation(e){if(e.includes("_"))t=e.split("_");else var t=e.split(" ");for(var a=0;a<t.length;a++){var o=0;"("==t[a].charAt(0)&&(o=1),"of"!=t[a].replace(/["'\(\)]/g,"")&&(t[a]=t[a].charAt(o).toUpperCase()+t[a].slice(o+1),1==o&&(t[a]="("+t[a]))}return t.join(" ")}function openSoftwareInfo(e,t){location.href=e+"/main/software/"+t}function openLibraryFrame(e){document.getElementById("libraryFrame").parentNode.style.display="",document.getElementById("commons-main-body").style.display="none",document.getElementById("commons-main-tabs").style.display="none",window.open(e,"libraryFrame")}function compareNodes(e,t){return e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:e.name.trim().toLowerCase()>t.name.trim().toLowerCase()?1:0}function toggleTitle(e){var t=$(e);t[0].parentNode.offsetWidth<t[0].parentNode.scrollWidth||t[0].offsetWidth<t[0].scrollWidth?t.attr("title",t.text()):t.attr("title","")}function activeTab(e){$('.tabs a[href="#'+e+'"]').tab("show"),location.hash=e,e.includes("publication")?$("#data-and-knowledge-tab").addClass("highlighted-item"):$("#data-and-knowledge-tab").removeClass("highlighted-item")}function getWebServicesTreeview(){var e=[];return e.push({text:"WebServices placeholder",nodes:[]}),e}function getSoftwareEnvironmentTreeview(){var e=[];return e.push({text:"Software environment placeholder",nodes:[]}),e}function getDiseaseTransmissionModelTreeview(){var e=[];return e.push({text:"Disease transmission model placeholder",nodes:[]}),e}function getToolsTreeview(){var e=[];return e.push({text:"Statistical analysis software"},{text:"Image manipulation"}),e}function init(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++)e[t].getAttribute("data-src")&&e[t].setAttribute("src",e[t].getAttribute("data-src"))}function convertDateNumToString(e){return e<10?e="0"+e:e+="",e}function getFormattedDate(){var e=new Date,t=e.getYear()-100,a=e.getMonth()+1,o=e.getDate(),n=e.getMinutes(),s=e.getSeconds();return(t=convertDateNumToString(t))+(a=convertDateNumToString(a))+(o=convertDateNumToString(o))+(n=convertDateNumToString(n))+(s=convertDateNumToString(s))}function drawDiagram(){$("#workflow-none-img").hide(),$("#workflow-spew-img").hide(),$("#workflow-synthia-img").hide();var e=$("input[name=synthpop]:checked").val(),t=$("input[name=dtm]:checked").val(),a=$("#olympus-username").val(),o=$("#location-select").val().split("_"),n=(formatLocation(o[0]),o[1]);if("spew"==e?$("#workflow-spew-img").show():"synthia"==e?$("#workflow-synthia-img").show():$("#workflow-none-img").show(),null!=n&&null!=e&&null!=t){var s="<username>";null!=a&&""!=a.trim()&&(s=a);var i=n+"_"+t+"_"+getFormattedDate();"spew"==e?$("#submit-lsdtm-script").text("/mnt/lustre0/data/shared_group_data/syneco/spew2synthia/scripts/lsdtm.sh -p 2010_ver1_"+n+" -o "+i):$("#submit-lsdtm-script").text("/mnt/lustre0/data/shared_group_data/syneco/spew2synthia/scripts/lsdtm.sh -p 2010_ver1_"+n+" -o "+i+" -e fred_populations/United_States_2010_ver1"),$("#example-submit-lsdtm-script").text("-bash-4.2$ /mnt/lustre0/data/shared_group_data/syneco/spew2synthia/scripts/lsdtm.sh -p spew_1.2.0_"+n+" -o /home/"+s+"/test\n557925.pbs.olympus.psc.edu"),$("#status-lsdtm-script").text("qstat | grep "+s),$("#example-status-lsdtm-script").text("-bash-4.2$ qstat | grep "+s+"\n557925.pbs.olympus.psc.edu ...synthia-1.2.0 "+s+"        00:33:37 R batch"),$("#view-output-lsdtm-script").text("ls "+i),$("#example-view-output-lsdtm-script").text("-bash-4.2$ ls /home/"+s+"/test\nspew2synthia-1.2.0.e557925  spew2synthia-1.2.0.o557925  OUT  params"),"spew"==e?($("#view-error-lsdtm-script").text("cat "+i+"/spew2synthia-1.2.0.e######"),$("#example-view-error-lsdtm-script").text("-bash-4.2$ cat /home/"+s+"/spew2synthia-1.2.0.e557925\n\nThe following have been reloaded with a version change:\n1) gcc/4.8.3 => gcc/6.1.0")):($("#view-error-lsdtm-script").text("cat "+i+"/United_States_2010_ver1.e######"),$("#example-view-error-lsdtm-script").text("-bash-4.2$ cat /home/"+s+"/United_States_2010_ver1.e557925\n\nThe following have been reloaded with a version change:\n1) gcc/4.8.3 => gcc/6.1.0")),"spew"==e?($("#view-stdout-lsdtm-script").text("tail "+i+"/spew2synthia-1.2.0.o######"),$("#example-view-stdout-lsdtm-script").text("-bash-4.2$ tail /home/"+s+"/spew2synthia-1.2.0.o557925\n\nday 239 report population took 0.000115 seconds\nday 239 maxrss 4068524\nday 239 finished Fri Apr  7 14:53:10 2017\nDAY_TIMER day 239 took 0.002799 seconds\n\n\nFRED simulation complete. Excluding initialization, 240 days took 0.493485 seconds\nFRED finished Fri Apr  7 14:53:10 2017\nFRED took 52.511174 seconds")):($("#view-stdout-lsdtm-script").text("tail "+i+"/United_States_2010_ver1.o######"),$("#example-view-stdout-lsdtm-script").text("-bash-4.2$ tail /home/"+s+"/United_States_2010_ver1.o557925\n\nday 239 report population took 0.000115 seconds\nday 239 maxrss 4068524\nday 239 finished Fri Apr  7 14:53:10 2017\nDAY_TIMER day 239 took 0.002799 seconds\n\n\nFRED simulation complete. Excluding initialization, 240 days took 0.493485 seconds\nFRED finished Fri Apr  7 14:53:10 2017\nFRED took 52.511174 seconds")),$("#view-fred-out-lsdtm-script").text("cat "+i+"/OUT/out1.txt"),$("#example-view-fred-out-lsdtm-script").text("-bash-4.2$ cat /home/"+s+"/OUT/out1.txt\nDay 0 Date 2012-01-02 WkDay Tue C 10 College 0 Cs 0 E 10 GQ 0 I 0 Is 0 M 0Military 0 N 2278377 Nursing_Home 0 P 10 Prison 0 R 0 S 2278367 Week 1 Year 2012 AR 0.00 ARs 0.00 RR 0.00\nDay 1 Date 2012-01-03 WkDay Wed C 0 College 0 Cs 1 E9 GQ 0 I 1 Is 1 M 0 Military 0 N 2278377 Nursing_Home 0 P 10 Prison 0 R 0 S 2278367 Week 1 Year 2012 AR 0.00 ARs 0.00 RR 0.00\n.\n.\n.\nDay 238 Date 2012-08-27WkDay Tue C 127 College 0 Cs 81 E 232 GQ 0 I 570 Is 376 M 0 Military 0 N 2278377 Nursing_Home 0 P 802 Prison 0 R 2904 S 2274671 Week 35 Year 2012 AR 0.23 ARs 0.14 RR 0.95\nDay 239 Date 2012-08-28 WkDay Wed C 108 College 0 Cs 75 E 228 GQ 0 I 593 Is 389 M 0 Military 0 N 2278377 Nursing_Home 0 P 821 Prison 0 R 2966 S 2274590 Week 35 Year 2012 AR 0.23 ARs 0.15 RR 1.20"),$("#lsdtm-script-container").show()}else $("#lsdtm-script-container").hide()}function sortSelect(e){var t=$(e+" option"),a=$(e).val();t.sort(function(e,t){return e.text>t.text?1:e.text<t.text?-1:0}),$(e).empty().append(t),$(e).val(a)}function checkLocationSelect(){""!=$("#location-select").val()?$("#synthpop-radios").children().each(function(e,t){$(t).text();$(t).removeAttr("disabled"),$(t).children().each(function(e,t){$(t).removeAttr("disabled")}),drawDiagram()}):$("#synthpop-radios").children().each(function(e,t){var a=$(t).text();$(t).attr("disabled","disabled"),"SPEW"==a&&($(t).children().each(function(e,t){$(t).attr("disabled","disabled"),$(t).removeAttr("checked")}),drawDiagram())})}function copyToClipboard(e){var t=$("<textarea>");$("body").append(t),t.val($(e).text()).select(),document.execCommand("copy"),t.remove()}function download(e,t){var a=$(t).text(),o=document.createElement("a");a.includes("xmlns")&&(e=e.replace(".json",".xml")),o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function openJsonInNewTab(e){var t=$(e).text(),a="application/json";t.includes("xmlns")&&(a="application/xml"),window.open("data:"+a+";charset=utf-8,"+encodeURIComponent(t),"_blank")}function viewEntryInModal(e,t){t.replace(new RegExp("\r?\n","g"),"<br />");$("#viewModalTitle").text(e),$("#viewModalBody").html("<br>"+t),$("#viewModal").modal("show")}function toggleElementById(e,t){event.preventDefault();var a=$(t).text().indexOf("example")>-1;if($(e).is(":visible"))if($(e).fadeOut(),a)$(t).text("show example");else{$(t).toggleClass("glyphicon-minus glyphicon-plus"),$("#example-"+e.replace("#","")).fadeOut();var o="#span-a-"+e.replace("#","").replace("-code-block",""),n="#a-"+e.replace("#","").replace("-code-block","");$(o).hide(),$(n).text("show example")}else if($(e).fadeIn(),a)$(t).text("hide example");else{$(t).toggleClass("glyphicon-plus glyphicon-minus"),$("#example-"+e.replace("#","")).fadeOut();o="#span-a-"+e.replace("#","").replace("-code-block","");$(o).show()}}function populateFieldValues(){var e=$("#field-select").val(),t=new Set;if($("#value-select").empty().append($("<option>",{value:"",text:""})),null!=e&&""!=e){for(var a=Object.keys(softwareDictionary),o=0;o<a.length;o++){var n=a[o];if("settings"!=n&&"Disease transmission models"==softwareDictionary[n].subtype)for(var s=0;s<softwareDictionary[n][e].length;s++){var i=softwareDictionary[n][e][s];"N/A"!=i&&t.add(i.toLowerCase())}}for(var r=Array.from(t).sort(),o=0;o<r.length;o++)$("#value-select").append($("<option>",{value:r[o],text:toTitleCase(r[o])}))}}function toTitleCase(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function unCamelCase(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(e){return e.toUpperCase()})}function changeQueryCategory(){var e=$("#category-select").val();null!=e&&""!=e?("software"==e?$("#human-readable-query-text").html("Find every entry in the <i>"+toTitleCase(e)+"</i> category in the MDC."):$("#human-readable-query-text").html("Find every entry classified as <i>"+toTitleCase(e).slice(0,-1)+"</i> in the <i>Software</i> category in the MDC."),$("#human-readable-query").show()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide())}function changeQueryField(){var e=$("#field-select").val(),t=$("#value-select").val(),a=$("input[name=fieldOperator]:checked").val();null!=e&&""!=e?null!=a&&""!=a&&"hasValue"==a?($("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC that has the <i>"+unCamelCase(e)+"</i> field."),$("#human-readable-query").show()):null!=a&&""!=a&&null!=t&&""!=t?("equals"==a?$("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC whose <i>"+unCamelCase(e)+"</i> is <i>"+toTitleCase(t)+"</i>."):$("#human-readable-query-text").html("Find every entry classified as <i>Disease Transmission Model</i> in the <i>Software</i> category in the MDC that contains a <i>"+unCamelCase(e)+"</i> of <i>"+toTitleCase(t)+"</i>."),$("#human-readable-query").show()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide()):($("#human-readable-query-text").html(""),$("#human-readable-query").hide())}function getNumConstraints(){return $("#constraints-listed li").size()}function removeConstraint(e){$(e).closest("li").remove(),0==getNumConstraints()&&($("#constraints-listed").hide(),$("#no-constraints-listed").show(),$("#run-query").hide())}function addConstraintToList(){if(removeDuplicateError(),""!=$("#human-readable-query-text").html()){var e=$("#human-readable-query-text").html()+' <button class="btn btn-default btn-xs" onclick="removeConstraint(this)">Delete</button>',t=!1;$("#constraints-listed li").each(function(a){$(this).html()==e&&(t=!0)}),t?($("#human-readable-query").addClass("error-color"),$("#human-readable-query-feedback").text("Error: Duplicate constraint.")):($("#constraints-listed").append($("<li>",{html:e})),getNumConstraints()>0&&($("#no-constraints-listed").hide(),$("#constraints-listed").show(),$("#run-query").show()))}else{var a=$("#category-select-container"),o=$("#field-select-container"),n=$("#value-select-container");if(a.is(":visible")){var s=$("#category-select").val();null!=s&&""!=s||(a.addClass("has-error"),$("#category-select-feedback").text("Error: Please select a category."))}else if(o.is(":visible")){var i=$("#field-select").val(),r=$("#value-select").val();null!=i&&""!=i||(o.addClass("has-error"),$("#field-select-feedback").text("Error: Please select a field.")),null!=r&&""!=r||(n.addClass("has-error"),$("#value-select-feedback").text("Error: Please select a value."))}}}function removeDuplicateError(){$("#human-readable-query").removeClass("error-color"),$("#human-readable-query-feedback").text("")}function removeError(e){$("#"+e+"-container").removeClass("has-error"),$("#"+e+"-feedback").text("")}function removeErrors(){removeError("category-select"),removeError("field-select"),removeError("value-select"),removeDuplicateError()}function toggleModalView(){$("#modal-html").hasClass("active")?($("#modal-code-block").css("max-height",$("#modal-html").height()-25+"px"),$("#modal-json-link").click(),$("#modal-switch-btn").text("Switch to HTML View")):($("#modal-html-link").click(),$("#modal-switch-btn").text("Switch to Metadata View"))}function openUrl(e){event.preventDefault();var t=$(e)[0].href;t.search("apolloLibraryViewer")>-1?$(location).attr("href",ctx+"/midas-sso/view?url="+encodeURIComponent(t)):$(location).attr("href",t)}function addConstraint(){if($("#new-constraint-1").is(":visible")){var e=$('div[id^="new-constraint-"]:last'),t=parseInt(e.prop("id").match(/\d+/g),10)+1;$("#constraint-operator-1-2").is(":visible")?$("#constraints-container").append($("#constraint-operator-1-2").clone().prop("id","constraint-operator-"+(t-1)+"-"+t)):$("#constraint-operator-1-2").show(),$("#constraints-container").append(e.clone().prop("id","new-constraint-"+t)),$("#new-constraint-"+t+" .constraint-header").text("Constraint #"+t)}else $("#new-constraint-1").show()}function deleteConstraint(e){var t=$(e).parent().parent().parent().parent()[0].id.split("-"),a=parseInt(t[t.length-1]),o=$('div[id^="new-constraint-"]').length;if(1==a&&1==o)$("#new-constraint-"+a).hide(),$("#constraint-operator-1-2").hide();else{var n="#constraint-operator-"+(a-1)+"-"+a;a%2!=0&&(n="#constraint-operator-"+a+"-"+(a+1)),$(n).remove(),$("#new-constraint-"+a).remove()}reindexConstraints()}function reindexConstraints(){for(var e=$('div[id^="new-constraint-"]'),t=$('div[id^="constraint-operator-"]'),a=0;a<e.length;a++)$(e[a]).prop("id","new-constraint-"+(a+1)),$("#new-constraint-"+(a+1)+" .constraint-header").text("Constraint #"+(a+1));for(a=0;a<t.length;a++)$(t[a]).prop("id","constraint-operator-"+(a+1)+"-"+(a+2))}function toggleLegend(e){"hide"===e?($("#main-legend").hide(),$("#show-legend").show()):"show"===e&&($("#show-legend").hide(),$("#main-legend").show())}var dataAugmentedPublications=[],software=[],softwareDictionary={},softwareSettings={},systemsSoftware=[],systemsSoftwareDictionary={},systemsSoftwareSettings={},diseaseTransmissionModel=[],diseaseTransmissionModelDictionary={},diseaseTransmissionModelSettings={},modelingPlatforms=[],modelingPlatformsDictionary={},modelingPlatformsSettings={},statisticalAnalysis=[],statisticalAnalysisDictionary={},statisticalAnalysisSettings={},imageManipulation=[],imageManipulationDictionary={},imageManipulationSettings={},webservices=[],webservicesDictionary={},webservicesSettings={},dataFormats=[],dataFormatsDictionary={},dataFormatsSettings={},standardIdentifiers=[],standardIdentifiersDictionary={},standardIdentifiersSettings={},geneticSequence=[],geneticSequenceDictionary={},geneticSequenceSettings={},tycho=[],tychoDictionary={},tychoSettings={},countryHash={},stateHash={"01":"Alabama","02":"Alaska","04":"Arizona","05":"Arkansas","06":"California","08":"Colorado","09":"Connecticut",10:"Delaware",11:"District Of Columbia",12:"Florida",13:"Georgia",15:"Hawaii",16:"Idaho",17:"Illinois",18:"Indiana",19:"Iowa",20:"Kansas",21:"Kentucky",22:"Louisiana",23:"Maine",24:"Maryland",25:"Massachusetts",26:"Michigan",27:"Minnesota",28:"Mississippi",29:"Missouri",30:"Montana",31:"Nebraska",32:"Nevada",33:"New Hampshire",34:"New Jersey",35:"New Mexico",36:"New York",37:"North Carolina",38:"North Dakota",39:"Ohio",40:"Oklahoma",41:"Oregon",42:"Pennsylvania",44:"Rhode Island",45:"South Carolina",46:"South Dakota",47:"Tennessee",48:"Texas",49:"Utah",50:"Vermont",51:"Virginia",53:"Washington",54:"West Virginia",55:"Wisconsin",56:"Wyoming"},fipsCodes=Object.keys(stateHash),syntheticEcosystemsDictionary={},epidemicsDictionary={},synthiaPopulationsDictionary={},caseSeriesDictionary={},chikungunyaDictionary={},diseaseSurveillanceDictionary={},moralityDataDictionary={},zikaDictionary={},infectiousDiseaseDictionary={};String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)});var locationData={text:"Location data",nodes:[]},dsd={text:"Disease surveillance data",nodes:[]},weatherAndClimateData={text:"Weather and climate data",nodes:[]};identifierCodes={12637:"Dengue virus",114727:"H1N1 virus",333278:"H7N9 virus",12721:"Human immunodeficiency virus",64320:"Zika virus",12066:"Coxsackievirus",1570291:"Ebola virus",1392:"Bacillus anthracis",119210:"H3N2 virus",11309:"Influenza virus",10345:"Suid alphaherpesvirus 1",418103:"Plasmodium",9606:"Homo sapiens",7157:"Culicidae",7159:"Aedes aegypti",476836:"San Juan, Puerto Rico",366188:"Los Angeles, California",5196:"Denmark",5622:"Yucatan, Mexico",11:"Sierra Leone",1216:"United States of America",510873:"Seattle, Washington",542924:"Cairns, Australia",544694:"Worldwide",544695:"The Americas",544287:"Iquitos, Peru",544696:"The Caribbean",544697:"Latin America",542920:"South America"};var convertToHtml=["publicationsThatUsedRelease","publicatoinsAboutRelease","forecasts","executables","dataInputFormats","dataOutputFormats"];$("#commons-body").on("click",function(e){"bs-popover"!==$(e.target).attr("class")&&($("[rel=popover]").not(e.target).popover("destroy"),$(".popover").remove()),$('[data-toggle="tooltip"]').tooltip({trigger:"hover",delay:350})}),$(document).ready(function(){$(window).width()<768&&$(".navbar-toggle").click();var e=$("a[href='"+location.hash+"']");if(location.hash&&e.length>0){e.tab("show"),"#workflows"==location.hash?setTimeout(function(){drawDiagram()},300):"#modal-json"==location.hash&&($("#modal-html-link").click(),location.hash="_");var t=$("a[href='"+location.hash+"']").text();""==t&&(t="Data-augmented Publication"),ga("send",{hitType:"pageview",page:location.pathname,title:t}),location.hash.includes("publication")&&$("#content-tab").addClass("highlighted-item")}else $("#content-tab").click(),ga("send",{hitType:"pageview",page:location.pathname,title:"Content"});$(document.body).on("click","a[data-toggle]",function(e){location.hash=this.getAttribute("href"),ga("send",{hitType:"pageview",page:location.pathname,title:$(this).text()})}),$(document.body).on("click","a",function(e){var t=this.getAttribute("href");t.includes("http")&&ga("send",{hitType:"event",eventCategory:"Clickthrough",eventAction:t})}),$("#navbar-collapse").collapse("hide"),$("#pageModal").on("hidden.bs.modal",function(){$("#modal-switch-btn").text("Switch to Metadata View"),$("#modal-html-link").click(),location.hash="_"})}),$(window).on("popstate",function(){var e=location.hash||$("a[data-toggle='tab']").first().attr("href");$("a[href='"+e+"']").tab("show"),location.hash.includes("publication")?$("#content-tab").addClass("highlighted-item"):$("#content-tab").removeClass("highlighted-item")}),window.onload=init;