"use strict";var FOREST_WIDGET_CREATOR=function(){function e(){}function t(e,n){if(e&&(e.ancestorsInput.checked=n,n?e.rowDiv.classList.add(c):e.descendantsInput.checked||e.rowDiv.classList.remove(c),e.data.parent))return t(e.data.parent,n)}function n(e,t){var n,d,a=[];for(a.push(e);a.length>0;)for((d=a.shift()).descendantsInput.checked=t,t?d.rowDiv.classList.add(c):d.ancestorsInput.checked||d.rowDiv.classList.remove(c),n=0;n<d.data.children.length;n++)a.push(d.data.children[n])}function d(e,d){var a;e.span=document.createElement("span"),e.rowDiv=document.createElement("div"),e.spanDiv=document.createElement("div"),e.inputDiv=document.createElement("div"),e.inputDiv.classList.add("checkbox-div"),e.spanDiv.classList.add("span-div"),e.ancestorsInput=document.createElement("input"),e.descendantsInput=document.createElement("input"),e.selfInput=document.createElement("input"),e.span.innerHTML=e.data.label,e.ancestorsInput.type="checkbox",e.ancestorsInput.onchange=function(){e.data.includeAncestors=e.ancestorsInput.checked,t(e,e.data.includeAncestors)},e.descendantsInput.type="checkbox",e.descendantsInput.onchange=function(){e.data.includeDescendants=e.descendantsInput.checked,n(e,e.data.includeDescendants)},e.selfInput.id="node-"+e.data.id,e.selfInput.type="checkbox",e.selfInput.value=e.data.id,e.selfInput.onchange=function(){if(e.data.userSelected=this.checked,e.data.userSelected){for(e.rowDiv.classList.add(r),a=0;a<d.userSelectedNodes.length;a++)if(d.userSelectedNodes[a]===e.data)return;d.userSelectedNodes.push(e.data)}else for(e.rowDiv.classList.remove(r),a=0;a<d.userSelectedNodes.length;a++)if(d.userSelectedNodes[a]===e.data){d.userSelectedNodes.splice(a,1);break}},e.inputDiv.appendChild(e.ancestorsInput),e.inputDiv.appendChild(e.descendantsInput),e.inputDiv.appendChild(e.selfInput),e.spanDiv.appendChild(e.span),e.rowDiv.appendChild(e.inputDiv),e.rowDiv.appendChild(e.spanDiv),e.element.appendChild(e.rowDiv)}function a(e,t){for(var n,d,a,s=[],i=e,c=[];i.data.parent;)i=i.data.parent;for(t.forest[t.forest.length-1]===i?s.push(p):s.push(l),n=0;n<i.data.children.length;n++)c.push(i.data.children[n]);for(;c.length>0;){for(a=(i=c.pop()).data.parent;s.length<i.depth+1;)s.push(p);for(d="",n=0;n<i.depth;n++)d+=s[n];for(a.data.children[a.data.children.length-1]===i?(s[i.depth]=p,i.span.innerHTML="<span>"+d+o+"</span>"+i.data.label):(s[i.depth]=l,i.span.innerHTML="<span>"+d+u+"</span>"+i.data.label),n=0;n<i.data.children.length;n++)c.push(i.data.children[n])}}function s(e,t,n,s){this.depth=0,this.data={id:-1,label:e,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1},t&&(this.data.id=t),this.element=document.createElement("div"),this.element.className="node",d(this,s),n&&(this.data.parent=n,this.depth=n.depth+1,a(this,s))}function i(e,t,n){var d=this;!function(){function i(){var e=r.offsetHeight-r.clientHeight<<1,t=r.clientHeight-(l.offsetHeight+e);p.style.height=t+"px"}var c=document.getElementById(e),r=document.createElement("div"),l=document.createElement("form"),p=document.createElement("form"),o=document.createElement("div"),u=[],h={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:t||"100%",height:n||"100%",widgetBody:r,forest:u};r.className="widget-body",r.style.width=h.width,r.style.height=h.height,l.className="header-body",l.innerHTML="<div><span>A</span><span>D</span><span>S</span></div>",p.className="forest-container",o.className="forest-body",p.appendChild(o),r.appendChild(l),r.appendChild(p),c.appendChild(r),window.addEventListener("resize",i),d.createNode=function(e){return e.id?new s(e.label,e.id,e.parent,h):new s(e,null,null,h)},d.addNodeByReference=function(e,t){o.appendChild(e.element),t?(e.data.parent=t,e.depth=t.depth+1,a(e,h),t.data.children.push(e),t.element.appendChild(e.element)):u.push(e),i()},d.addNode=function(e){var t=d.createNode(e);return o.appendChild(t.element),t.data.parent?(t.data.parent.data.children.push(t),t.data.parent.element.appendChild(t.element)):u.push(t),i(),t},d.getUserSelectedNodes=function(){return h.userSelectedNodes}}()}var c="included",r="selected",l="&#9475;",p="&emsp;",o="&#9494;",u="&#9507;";return e.prototype.create=function(e,t,n){return e?new i(e,t,n):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)},new e}();