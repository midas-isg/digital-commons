"use strict";var FOREST_WIDGET_CREATOR=function(){function e(){}function n(e,t){if(e&&(e.ancestorsInput.checked=t,t?e.rowDiv.classList.add(l):e.descendantsInput.checked||e.rowDiv.classList.remove(l),e.data.parent))return n(e.data.parent,t)}function t(e,n){var t,d,a=[];for(a.push(e);a.length>0;)for((d=a.shift()).descendantsInput.checked=n,n?d.rowDiv.classList.add(l):d.ancestorsInput.checked||d.rowDiv.classList.remove(l),t=0;t<d.data.children.length;t++)a.push(d.data.children[t])}function d(e,n){var t,d,a,s=[];for(d=0;d<e.length;d++)s.push(e[d]);for(;s.length>0;)for(n(t=s.shift()),a=0;a<t.data.children.length;a++)s.push(t.data.children[a])}function a(e,d){function a(){for(c=0;c<d.userSelectedNodes.length;c++)if(d.userSelectedNodes[c]===e.data)return;d.userSelectedNodes.push(e.data)}function s(){for(c=0;c<d.userSelectedNodes.length;c++)if(d.userSelectedNodes[c]===e.data){d.userSelectedNodes.splice(c,1);break}}var c,i=document.createElement("span"),l=document.createElement("span"),p=document.createElement("span");i.classList="ancestors",l.classList="descendants",p.classList="self",e.span=document.createElement("span"),e.rowDiv=document.createElement("div"),e.spanDiv=document.createElement("div"),e.inputDiv=document.createElement("div"),e.inputDiv.classList.add("checkbox-div"),e.spanDiv.classList.add("span-div"),e.ancestorsInput=document.createElement("input"),e.ancestorsInput.hidden=d.headerBody.hidden,e.descendantsInput=document.createElement("input"),e.descendantsInput.hidden=d.headerBody.hidden,e.selfInput=document.createElement("input"),e.span.innerHTML=e.data.label,e.ancestorsInput.type="checkbox",e.ancestorsInput.disabled=!0,e.ancestorsInput.onchange=function(){e.data.includeAncestors=e.ancestorsInput.checked,n(e,e.data.includeAncestors),e.data.includeAncestors?a():e.data.userSelected||e.data.includeDescendants||s()},e.descendantsInput.type="checkbox",e.descendantsInput.disabled=!0,e.descendantsInput.onchange=function(){e.data.includeDescendants=e.descendantsInput.checked,t(e,e.data.includeDescendants),e.data.includeDescendants?a():e.data.userSelected||e.data.includeAncestors||s()},e.selfInput.id="node-"+e.data.id,e.selfInput.type="checkbox",e.selfInput.value=e.data.id,e.selfInput.onchange=function(){e.data.userSelected=this.checked,e.data.userSelected?(a(),e.rowDiv.classList.add(r)):e.data.includeAncestors||e.data.includeDescendants||(s(),e.rowDiv.classList.remove(r))},i.appendChild(e.ancestorsInput),l.appendChild(e.descendantsInput),p.appendChild(e.selfInput),e.inputDiv.appendChild(i),e.inputDiv.appendChild(l),e.inputDiv.appendChild(p),e.spanDiv.appendChild(e.span),e.rowDiv.appendChild(e.inputDiv),e.rowDiv.appendChild(e.spanDiv),e.element.appendChild(e.rowDiv)}function s(e,n){for(var t,d,a,s=[],c=e,i=[];c.data.parent;)c=c.data.parent;for(n.forest[n.forest.length-1]===c?s.push(""):s.push(p),t=0;t<c.data.children.length;t++)i.push(c.data.children[t]);for(;i.length>0;){for(a=(c=i.pop()).data.parent;s.length<c.depth+1;)s.push(o);for(d="",t=0;t<c.depth;t++)d+=s[t];for(a.data.children[a.data.children.length-1]===c?(s[c.depth]=o,c.span.innerHTML="<span>"+d+u+"</span>"+c.data.label):(s[c.depth]=p,c.span.innerHTML="<span>"+d+h+"</span>"+c.data.label),t=0;t<c.data.children.length;t++)i.push(c.data.children[t])}}function c(e,n,t,d){this.depth=0,this.data={id:-1,label:e,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1},n&&(this.data.id=n),this.element=document.createElement("div"),this.element.className="node",a(this,d),t&&(this.data.parent=t,this.depth=t.depth+1,s(this,d))}function i(e,n,t){var a=this;!function(){function i(){var e=p.offsetHeight-p.clientHeight<<1,n=p.clientHeight-(o.offsetHeight+e);u.style.height=n+"px"}function l(e){e.ancestorsInput.hidden=!1,e.descendantsInput.hidden=!1}var r=document.getElementById(e),p=document.createElement("div"),o=document.createElement("form"),u=document.createElement("form"),h=document.createElement("div"),I=[],D={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:n||"100%",height:t||"100%",headerBody:o,widgetBody:p,forest:I};p.className="widget-body",p.style.width=D.width,p.style.height=D.height,o.className="header-body",o.hidden=!0,o.innerHTML="<div>"+f+m+v+"</div>",u.className="forest-container",h.className="forest-body",u.appendChild(h),p.appendChild(o),p.appendChild(u),r.appendChild(p),window.addEventListener("resize",i),a.createNode=function(e){return e.id?new c(e.label,e.id,e.parent,D):new c(e,null,null,D)},a.addNodeByReference=function(e,n){h.appendChild(e.element),n?(e.ancestorsInput.disabled=!1,n.descendantsInput.disabled=!1,e.data.parent=n,e.depth=n.depth+1,n.data.children.push(e),s(e,D),n.element.appendChild(e.element),o.hidden&&(o.hidden=!1,d(I,l))):I.push(e),i()},a.addNode=function(e){var n=a.createNode(e);return h.appendChild(n.element),n.data.parent?(n.ancestorsInput.disabled=!1,n.data.parent.descendantsInput.disabled=!1,n.data.parent.data.children.push(n),s(n,D),n.data.parent.element.appendChild(n.element),o.hidden&&(o.hidden=!1,d(I,l))):I.push(n),i(),n},a.getUserSelectedNodes=function(){return D.userSelectedNodes}}()}var l="included",r="selected",p="&#9475;",o="&emsp;",u="&#9494;",h="&#9507;",f="<div class='ancestors'><span>Ancestors</span></div>",m="<div class='descendants'><span class='ancestors'>&emsp;</span><span>Descendants</span></div>",v="<div class='self'><span class='ancestors'>&emsp;</span><span class='descendants'>&emsp;</span><span>Self</span></div>";return e.prototype.create=function(e,n,t){return e?new i(e,n,t):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)},new e}();