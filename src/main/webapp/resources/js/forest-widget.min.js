var FOREST_WIDGET_CREATOR=function(){function n(){}function q(b,h){if(b&&(b.data.userSelected||((b.input.checked=h)?b.span.classList.add("included"):b.span.classList.remove("included")),b.data.parent))return q(b.data.parent,h)}function r(b,h){var f=[];for(f.push(b);0<f.length;){var c=f.shift();c.data.userSelected||((c.input.checked=h)?c.span.classList.add("included"):c.span.classList.remove("included"));for(b=0;b<c.data.children.length;b++)f.push(c.data.children[b])}}function t(b,h,f,c){var d=this,
    g;this.input=document.createElement("input");this.depth=0;this.data={id:-1,node:this,label:b,parent:null,children:[],userSelected:!1,includeAncestors:!1,includeDescendants:!1};h&&(this.data.id=h);this.element=document.createElement("div");this.element.className="node";f&&(this.data.parent=f,this.depth=f.depth+15,this.element.style.textIndent=this.depth+"px");this.input.id="node-"+this.data.id;this.input.type="checkbox";this.input.onchange=function(){d.data.userSelected=this.checked;d.data.includeAncestors=
    c.includeAncestors;d.data.includeDescendants=c.includeDescendants;d.data.includeAncestors&&q(d.data.parent,d.data.userSelected);d.data.includeDescendants&&r(d,d.data.userSelected);if(d.data.userSelected){d.span.classList.add("selected");for(g=0;g<c.userSelectedNodes.length;g++)if(c.userSelectedNodes[g]===d.data)return;c.userSelectedNodes.push(d.data)}else for(d.span.classList.remove("included"),d.span.classList.remove("selected"),d.data.includeAncestors=c.includeAncestors,d.data.includeDescendants=
    c.includeDescendants,g=0;g<c.userSelectedNodes.length;g++)if(c.userSelectedNodes[g]===d.data){c.userSelectedNodes.splice(g,1);break}};this.span=document.createElement("span");this.span.innerHTML=this.data.label;this.span.classList.remove("included");this.span.classList.remove("selected");this.element.appendChild(this.input);this.element.appendChild(this.span)}function v(b,h,f){var c=this;(function(){function d(a,c){var d=document.createElement("div"),b=document.createElement("input");b.type="checkbox";
    b.value=a;d.style.textIndent="10px";b.onchange="ancestors"===a?function(){e.includeAncestors=b.checked}:function(){e.includeDescendants=b.checked};d.appendChild(b);a=document.createElement("span");a.innerHTML=c;d.appendChild(a);return d}function g(){m.style.height=k.clientHeight-(l.offsetHeight+(k.offsetHeight-k.clientHeight<<1))+"px"}var n=document.getElementById(b),k=document.createElement("div"),m=document.createElement("form"),p=document.createElement("div"),l=document.createElement("form"),u=
    [],e={userSelectedNodes:[],includeAncestors:!1,includeDescendants:!1,width:h?h:"100%",height:f?f:"100%",widgetBody:k,optionsBody:l,forestContainer:m};k.className="widget-body";m.className="forest-container";p.className="forest-body";l.className="options-body";k.style.width=e.width;k.style.height=e.height;(function(){var a=document.createElement("div"),c=document.createElement("span");c.innerHTML="For next selection:";a.appendChild(c);l.appendChild(a)})();l.appendChild(d("ancestors","Include ancestors"));
    l.appendChild(d("descendants","Include descendants"));l.appendChild(function(){var a=document.createElement("div"),b=document.createElement("button");b.innerHTML="Clear all";b.type="button";b.onclick=function(){c.clearAll()};a.appendChild(b);return a}());m.appendChild(p);k.appendChild(m);k.appendChild(l);n.appendChild(k);window.addEventListener("resize",g);c.clearAll=function(){var a;for(a=0;a<e.userSelectedNodes.length;a++)e.userSelectedNodes[a].node.input.checked=!1,e.userSelectedNodes[a].node.span.classList.remove("included"),
        e.userSelectedNodes[a].node.span.classList.remove("selected"),q(e.userSelectedNodes[a].node,!1),r(e.userSelectedNodes[a].node,!1);e.userSelectedNodes=[]};c.createNode=function(a){return a.id?new t(a.label,a.id,a.parent,e):new t(a,null,null,e)};c.addNodeByReference=function(a,b){p.appendChild(a.element);b?(a.data.parent=b,a.depth=b.depth+15,a.element.style.textIndent=a.depth+"px",b.data.children.push(a),b.element.appendChild(a.element)):u.push(a);g()};c.addNode=function(a){a=c.createNode(a);p.appendChild(a.element);
        a.data.parent?(a.data.parent.data.children.push(a),a.data.parent.element.appendChild(a.element)):u.push(a);g();return a};c.getModes=function(){return{includeAncestors:e.includeAncestors,includeDescendants:e.includeDescendants}};c.getUserSelectedNodes=function(){return e.userSelectedNodes}})()}n.prototype.create=function(b,h,f){return b?new v(b,h,f):(console.error("Failed to provide parent element ID to ForestWidgetCreator.create(parentElementID)"),null)};return new n}();